@mixin arrowBase($arrow-size) {
   border-color: transparent;
   border-style: $border-style;
   border-width: $arrow-size;
   display: block;
   height: 0;
   position: absolute;
   width: 0;

   &::after {
      border-color: transparent;
      border-style: $border-style;
      border-width: $arrow-size;
      content: '';
      display: block;
      height: 0;
      position: absolute;
      width: 0;
   }

   // x-placement is used in Popper 1.x (Envision)
   // data-popper-placement is Popper 2.x (React apps)
   [x-placement='top'] &,
   [data-popper-placement='top'] &,
   [x-placement='bottom'] &,
   [data-popper-placement='bottom'] & {
      &::after {
         transform: translateX(-50%);
      }
   }

   [x-placement='right'] &,
   [data-popper-placement='right'] &,
   [x-placement='left'] &,
   [data-popper-placement='left'] & {
      &::after {
         transform: translateY(-50%);
      }
   }
}

@mixin arrow(
   $location,
   $arrow-size,
   $branded-border-width,
   $color: css-var('ui-color-brand')
) {
   $oppositeLocation: map-get(
      (
         'top': 'bottom',
         'right': 'left',
         'bottom': 'top',
         'left': 'right',
      ),
      $location
   );

   &[x-placement='#{$location}'],
   &[data-popper-placement='#{$location}'] {
      border-#{$oppositeLocation}: $branded-border-width solid $color;
      margin-#{$oppositeLocation}: $arrow-size;

      .env-popover__arrow {
         #{$oppositeLocation}: -$arrow-size * 2 - $branded-border-width;

         &::after {
            border-#{$location}-color: $color;
            border-#{$oppositeLocation}-width: 0;
            #{$oppositeLocation}: 0;
         }
      }
   }
}
